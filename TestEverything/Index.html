<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <script type="text/javascript" src="..\\omelet\\out\\omelet.min.js"></script>
    <script type="text/javascript">
        var loadString = function(path, callback)
        {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function()
            {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        if (callback)
                            callback(null, xhr.responseText);
                    } else {
                        if (callback)
                            callback(xhr, null);
                    }
                }
            };
            xhr.open("GET", path, true);
            xhr.send();
        };
    </script>
    <script type="text/javascript">
        var scene = omelet.createEmptyScene();

        loadString('./assets.json', function(err, data) {
            if (err) {
                console.log("Error loading assets from the web: " + err);
            } else {
                scene.addAssets(data)
                loadString('./hierarchy.json', function(err, data) {
                    if (err) console.log("Error loading hierarchy from the web: " + err);
                    else scene.addToHierarchy(data);
                });
            }
        });

        window.onload = function() {
            var c = document.getElementById('theGame');

            c.width = window.innerWidth;
            c.height = window.innerHeight;

            window.addEventListener('resize', function() {
                c.width = window.innerWidth;
                c.height = window.innerHeight;
            }, false);

            window.game = omelet.makeGame(c, scene);
            game.start();
        };
    </script>
</head>
<body>
    <canvas id="theGame"></canvas>
</body>
</html>