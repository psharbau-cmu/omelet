<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transform Tests</title>
    <style type="text/css">
        * { margin:0; padding:0; }
        html, body { width:100%; height:100%; }
        canvas { display:block; }
    </style>
    <script src="./Out/dafen2d.min.js"></script>
    <script src="./TestGame/testGame.rotateSlowly.js"></script>
    <script src="./TestGame/testGame.shootAcross.js"></script>
    <script src="./TestGame/testGame.mouseEvents.js"></script>
    <script type="text/javascript">
        var testScene = {
            Layers:{
                "A":-1,
                "B":-2,
                "Dragon":0
            },
            Hierarchy:[
                {
                    'dafen2d.transform': {
                        data:{
                            x:0,
                            y:0
                        }
                    },
                    'dafen2d.squareRenderer':{
                        data:{
                            width:30,
                            height:60,
                            color:'#66ff33',
                            layer:"A"
                        }
                    },
                    children:[
                        {
                            'dafen2d.transform': {
                                data:{
                                    x:0,
                                    y:0
                                }
                            },
                            'dafen2d.squareRenderer':{
                                data:{
                                    width:60,
                                    height:30,
                                    color:'#6633ff',
                                    layer:"B"
                                }
                            },
                            'testGame.rotateSlowly':{
                                data:{
                                    speed:1
                                }
                            },
                            'testGame.mouseEvents':{}
                        }
                    ]
                },
                {
                    'dafen2d.transform':{},
                    'testGame.shootAcross':{},
                    'dafen2d.squareRenderer':{
                        data:{
                            layer:'B'
                        }
                    },
                    'testGame.rotateSlowly':{},
                    children:[
                        {
                            'dafen2d.transform':{},
                            'dafen2d.spriteRenderer':{
                                data:{
                                    layer:'Dragon',
                                    orderInLayer:0,
                                    sheetName:'DragonSheet',
                                    spriteName:'Head'
                                }
                            }
                        }
                    ]
                }
            ],
            Assets:{
                'DragonSheet':{
                    type:'dafen2d.spriteSheet',
                    data:{
                        src:'./TestGame/dragon.png',
                        sprites:{
                            'Head':{
                                x:0,
                                y:0,
                                width:210,
                                height:205,
                                pivotX:150,
                                pivotY:150
                            },
                            'Body':{}
                        }
                    }
                }
            }
        };

        window.onload = function() {
            var c = document.getElementById('testCanvas');

            c.width = window.innerWidth;
            c.height = window.innerHeight;

            window.addEventListener('resize', function() {
                c.width = window.innerWidth;
                c.height = window.innerHeight;
            }, false);

            var g = dafen2d.makeGame(c, testScene);
            g.start();
        };
    </script>
</head>
<body>
    <canvas id="testCanvas" width="640" height="480"></canvas>
</body>
</html>